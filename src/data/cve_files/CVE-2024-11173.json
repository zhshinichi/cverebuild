{
    "CVE-2024-11173": {
        "published_date": "2025-03-20T10:10:33.944Z",
        "patch_commits": [
            {
                "url": "https://github.com/danny-avila/librechat/commit/95a212534f1c5991bd1231a34ac3668b4b592cc3",
                "content": "fix: catch conversation parsing errors\n\nFilename: api/server/middleware/buildEndpointOption.js:\n```\n@@ -27,7 +27,12 @@\nconst buildFunction = {\n \n async function buildEndpointOption(req, res, next) {\n   const { endpoint, endpointType } = req.body;\n-  let parsedBody = parseCompactConvo({ endpoint, endpointType, conversation: req.body });\n+  let parsedBody;\n+  try {\n+    parsedBody = parseCompactConvo({ endpoint, endpointType, conversation: req.body });\n+  } catch (error) {\n+    return handleError(res, { text: 'Error parsing conversation' });\n+  }\n \n   if (req.app.locals.modelSpecs?.list && req.app.locals.modelSpecs?.enforce) {\n     /** @type {{ list: TModelSpec[] }}*/\n\n@@ -56,11 +61,15 @@\nasync function buildEndpointOption(req, res, next) {\n       });\n     }\n \n-    parsedBody = parseCompactConvo({\n-      endpoint,\n-      endpointType,\n-      conversation: currentModelSpec.preset,\n-    });\n+    try {\n+      parsedBody = parseCompactConvo({\n+        endpoint,\n+        endpointType,\n+        conversation: currentModelSpec.preset,\n+      });\n+    } catch (error) {\n+      return handleError(res, { text: 'Error parsing model spec' });\n+    }\n   }\n \n   const endpointFn = buildFunction[endpointType ?? endpoint];\n```"
            }
        ],
        "sw_version": "v0.7.6-rc1",
        "sw_version_wget": "https://github.com/danny-avila/librechat/archive/refs/tags/v0.7.6-rc1.zip",
        "description": "An unhandled exception in the danny-avila/librechat repository, version git 600d217, can cause the server to crash, leading to a full denial of service. This issue occurs when certain API endpoints receive malformed input, resulting in an uncaught exception. Although a valid JWT is required to exploit this vulnerability, LibreChat allows open registration, enabling unauthenticated attackers to create an account and perform the attack. The issue is fixed in version 0.7.6.",
        "sec_adv": [
            {
                "url": "https://huntr.com/bounties/4cebf926-c17f-4836-868b-e1de86221cec",
                "content": "Bounties\nPartners\nCommunity\nInfo\nSUBMIT REPORT\nunhandled exception caused server crash in danny-avila/librechat\nValid\nReported on Oct 25th 2024\nDescription\nin javascript express framework, if async router handler throw an exception, the whole server will crash. In librechat, some API, when leading with some malformed input, will have uncaught exception. This will lead to server crash, thus a full denial of service.\nMind that although this need a working jwt, but LibreChat is an open registered software, which means attacker can just self register an account to perform the attack. Thus unauthed attacker can still perform the attack.\nProof of Concept\nJust send this to server: use your own auth header.\ncurl -X POST \"http://127.0.0.1:3080/api/agents/chat\" -H \"Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY3MTYwM2ViODM2MzNjZWY1NDg5ODNhZCIsInVzZXJuYW1lIjoib2ljdSIsInByb3ZpZGVyIjoibG9jYWwiLCJlbWFpbCI6Im9pY3UwNjE5QDE2My5jb20iLCJpYXQiOjE3Mjk4NDQ0NDcsImV4cCI6MTcyOTg0NTM0N30.wAl2-pSfIU6FzQ3F3TeRkCvC5WJjmiQZduTK_plMht0\"\nNote that after the curl, the server crash like this :\n2024-10-25 16:21:06 error: There was an uncaught error: undefined endpoint: undefined\nProcess finished with exit code 1\nImpact\nServer crash, thus a full denial of service.\nWe are processing your report and will contact thedanny-avila/librechat team within 24 hours.7 months ago\nA danny-avila/librechat maintainerhas acknowledged this report7 months ago\nThe scheduled publication date was automatically extended from 23rd Jan 2025  to 30th Jan 2025  due to the maintainers acknowledgement of the report7 months ago\nDanny Avila\ncommented7 months ago\nMaintainer\nLibreChat is an open registered software\nFYI it runs this way by default, but registration can be disabled.\nhuntr-helpermodified the Severity from High (7.5) to Medium (6.5)7 months ago\nThe researcher has received a minor penalty to their credibility for miscalculating the severity: -1\nDanny Avila validated this vulnerability6 months ago\noicu0619has been awarded the disclosure bounty\nThe fix bounty is now up for grabs\nThe researcher's credibility has increased: +7\nCVE-2024-11173assigned to this report.6 months ago\nDanny Avilamarked this as fixedin 0.7.6with commit95a2126 months ago\nDanny Avilahas been awarded the fix bounty\nWe have sent a warning to the danny-avila/librechat team to inform them that this report will be published in 48 hours4 months ago\nThis vulnerability has now been published4 months ago\nCVE-2024-11173has now been published2 months ago\nSign in to join this conversation\nCVE\nCVE-2024-11173\n(Published)\nVulnerability Type\nCWE-248: Uncaught Exception\nSeverity\nMedium (6.5)\nAttack vector\nNetwork\nAttack complexity\nLow\nPrivileges required\nLow\nUser interaction\nNone\nScope\nUnchanged\nConfidentiality\nNone\nIntegrity\nNone\nAvailability\nHigh\nOpen in visual CVSS calculator\nRegistry\nNpm\nAffected Version\ngit 600d217\nVisibility\nPublic\nStatus\nFixed\nDisclosure Bounty\n$75\nFix Bounty\n$18.75\nFound by\nFixed by\nSupported by Protect AI and leading the way to MLSecOps and greater AI security.\nÂ© 2024\nPrivacy Policy\nTerms of Service\nCode of Conduct\nCookie Preferences\nContact Us",
                "effective": true,
                "effective_reason": "The advisory includes a specific curl command demonstrating the issue, showing it is a proof of concept."
            }
        ],
        "cwe": [
            {
                "id": "CWE-248",
                "value": "CWE-248 Uncaught Exception"
            }
        ]
    }
}